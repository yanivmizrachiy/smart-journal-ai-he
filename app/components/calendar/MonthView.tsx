import { useMemo } from 'react'; import { useNavigate,useParams } from 'react-router-dom'
const daysHe=['א׳','ב׳','ג׳','ד׳','ה׳','ו׳','ש׳']
function build(ym:string){const [y,m]=ym.split('-').map(Number);const f=new Date(y,m-1,1);const s=new Date(f);s.setDate(f.getDate()-((f.getDay()+6)%7));const out:any[]=[];for(let i=0;i<42;i++){const d=new Date(s);d.setDate(s.getDate()+i);const iso=d.toISOString().slice(0,10);out.push({iso,d,inMonth:d.getMonth()===(m-1)})}return out}
export default function MonthView(){const {ym=''}=useParams();const nav=useNavigate();const cells=useMemo(()=>build(ym),[ym]);return(<div style={{maxWidth:1100,margin:'16px auto',padding:'0 12px'}}><h1>תצוגת חודש {ym}</h1><div style={{display:'grid',gridTemplateColumns:'repeat(7,1fr)',gap:'6px'}}>{daysHe.map(d=><div key={d} style={{textAlign:'center',fontSize:12,opacity:.8,background:'#f8fafc',border:'1px solid #e5e7eb',borderRadius:10,padding:'4px 0'}}>{d}</div>)}{cells.map(c=><div key={c.iso} role='button' onClick={()=>nav(`/day/${c.iso}`)} style={{minHeight:110,opacity:c.inMonth?1:.45,border:'1px solid #e5e7eb',borderRadius:12,padding:8,background:'#fff'}}><div style={{display:'flex',justifyContent:'space-between',fontSize:13}}><span>{c.d.getDate()}</span><span style={{background:'#ecfeff',color:'#0e7490',border:'1px solid #dbeafe',borderRadius:999,padding:'0 6px',fontSize:12}}>עברית</span></div></div>)}</div></div>)}
